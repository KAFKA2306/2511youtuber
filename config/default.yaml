workflow:
  default_run_dir: "runs"
  checkpoint_enabled: true

steps:
  news:
    count: 3
    query: "bloomberg OR 出来高 OR 決算 OR finance.yahoo OR earnings OR news.qq OR kafkafinancialgroup.hatenablog"
    recent_topics_runs: 5
    recent_topics_max_chars: 220
    recent_topics_min_token_length: 3

  script:
    min_duration: 300
    max_duration: 600
    target_wow_score: 5.0
    speakers:
      analyst:
        name: "春日部つむぎ"
        aliases:
          - "春日部つむぎ"
          - "かすかべ つむぎ"
          - "つむぎ"
      reporter:
        name: "ずんだもん"
        aliases:
          - "ずんだもん"
      narrator:
        name: "玄野武宏"
        aliases:
          - "玄野武宏"
          - "ナレーション"
          - "ナレーター"

  audio:
    sample_rate: 24000
    format: "wav"

  subtitle:
    width_per_char_pixels: 70
    min_visual_width: 16
    max_visual_width: 40

  video:
    resolution: "1920x1080"
    fps: 25
    codec: "h264_nvenc"
    preset: "p5"
    encoder_options:
      pix_fmt: "yuv420p"
      rc: "vbr"
      cq: 19
      acodec: "aac"
    encoder_global_args:
      - "-hwaccel"
      - "cuda"
      - "-hwaccel_output_format"
      - "cuda"
    intro_outro:
      enabled: true
      intro_path: "assets/video/おはようございます。今日も世界の動きを見てみましょう.mp4"
      outro_path: "assets/video/チャンネル登録と通知オンをお願いします.mp4"
      twitter_outro_path: "assets/video/続きはYoutube.mp4"
      thumbnail_clip:
        enabled: true
        duration_seconds: 0.1
        source_key: "generate_thumbnail"
    effects:
      - type: "ken_burns"
        enabled: true
        zoom_speed: 0.0015
        max_zoom: 1.2
        hold_frame_factor: 1.0
        pan_mode: "center"
      - type: "overlay"
        enabled: true
        image_path: "assets/春日部つむぎ立ち絵公式_v2.0/春日部つむぎ立ち絵公式_v1.1.1.png"
        anchor: "bottom_right"
        height_ratio: 0.85
        offset:
          right: 20
          bottom: 0
      - type: "overlay"
        enabled: true
        image_path: "assets/zundamon.webp"
        anchor: "bottom_left"
        height_ratio: 0.51
        offset:
          left: 20
          bottom: 0
    thumbnail_overlay:
      enabled: true
      duration_seconds: 0.1
      source_key: "generate_thumbnail"
    subtitles:
      font_path: "assets/fonts/ZenMaruGothic-Bold.ttf"
      font_name: "Zen Maru Gothic"
      font_size: 72
      primary_colour: "&HFFFFFF&"
      outline_colour: "&H000000&"
      outline: 2
      alignment: 2
      margin_l: 0 #400
      margin_r: 0
      margin_v: 10

  thumbnail:
    enabled: true
    width: 1280
    height: 720
    background_color: "#FFE14A"
    title_color: "#C62828"
    subtitle_color: "#FFD166"
    show_subtitle: false
    padding: 80
    max_lines: 4
    max_chars_per_line: 12
    title_font_size: 96
    subtitle_font_size: 56
    font_path: "assets/fonts/ZenMaruGothic-Bold.ttf"
    right_guard_band_px: 400
    outline_inner_color: "#FFFFFF"
    outline_inner_width: 1
    outline_outer_color: "#000000"
    outline_outer_width: 0
    palettes:
      - background_color: "#FFE14A"
        title_color: "#C62828"
        outline_inner_color: "#FFFFFF"
        outline_inner_width: 1
        outline_outer_color: "#000000"
        outline_outer_width: 0
      - background_color: "#B71C1C"
        title_color: "#FFC107"
        outline_inner_color: "#0B0F19"
        outline_inner_width: 1
        outline_outer_color: "#000000"
        outline_outer_width: 1
      - background_color: "#0B0F19"
        title_color: "#E5FCF4"
        outline_inner_color: "#000000"
        outline_inner_width: 1
        outline_outer_color: "#000000"
        outline_outer_width: 0
      - background_color: "#0D1D40"
        title_color: "#FACC15"
        outline_inner_color: "#000000"
        outline_inner_width: 0
        outline_outer_color: "#0B0F19"
        outline_outer_width: 0
      - background_color: "#0A0F1F"
        title_color: "#E31C23"
        outline_inner_color: "#FFFFFF"
        outline_inner_width: 1
        outline_outer_color: "#000000"
        outline_outer_width: 0
    overlays:
      - name: "character"
        enabled: true
        image_path: "assets/春日部つむぎ立ち絵公式_v2.0/春日部つむぎ立ち絵公式_v1.1.1.png"
        anchor: "bottom_right"
        height_ratio: 0.85
        offset:
          right: 20
          bottom: 0
      - name: "logo"
        enabled: false
        image_path: "assets/icon2510youtuber-mini.png"
        anchor: "bottom_right"
        height: 100
        offset:
          right: 40
          bottom: 40

  metadata:
    enabled: true
    use_llm: true
    llm_model: "gemini/gemini-2.5-pro"
    fallback_llm_model: "gemini/gemini-2.5-flash-preview-09-2025"
    target_keywords:
      - "金融"
      - "経済"
      - "投資"
      - "株"
    max_title_length: 50
    max_description_length: 5000
    default_tags:
      - "金融"
      - "経済"
      - "投資"
    tone:
      guidelines:
        - "タイトルと説明文は事実を端的に伝える落ち着いた専門家の語調に統一する"
        - "誇張や陰謀論を想起させる語彙を避け、投資家が安心して共有できる表現にする"
      title_disallowed_terms:
        - "闇"
        - "陰謀"
        - "激震"
        - "暴露"
        - "暴走"
        - "やばい"
        - "ショック"
        - "衝撃"
        - "暴落"
        - "警告"
        - "危機"
      description_disallowed_terms:
        - "闇"
        - "陰謀"
        - "激震"
        - "暴露"
        - "暴走"
        - "やばい"
        - "ショック"
        - "衝撃"
        - "暴落"
        - "警告"
        - "危機"
      replacements:
        闇: "課題"
        陰謀: "構造的課題"
        激震: "急変"
        衝撃: "注目"
        ショック: "変化"
        暴露: "解説"
        暴走: "過熱"
        やばい: "注意"
        暴落: "下落"
        警告: "注意喚起"
        危機: "リスク"

  youtube:
    enabled: true
    dry_run: false
    default_visibility: "public"
    category_id: 25
    max_title_length: 100
    max_description_length: 5000
    default_tags:
      - "金融"
      - "ニュース"
      - "経済"

  twitter:
    enabled: true
    dry_run: false
    clip_duration_seconds: 60
    start_offset_seconds: 0

  podcast:
    enabled: false
    feed_title: "金融ニュース解説ポッドキャスト"
    feed_description: "AI生成の日本経済・金融ニュース解説"
    feed_author: "2510 YouTuber AI"
    feed_url: "https://example.com/podcast"
  buzzsprout:
    enabled: false
    podcast_id: null
    token_key: "buzzsprout_api_token"
    podcast_id_key: "buzzsprout_podcast_id"
    title_template: "金融ニュース解説 Episode {run_id}"
    publish_immediately: true

providers:
  llm:
    gemini:
      model: "gemini/gemini-2.5-pro"
      fallback_model: "gemini/gemini-2.5-flash-preview-09-2025"
      temperature: 0.35
      max_tokens: 4000

  tts:
    voicevox:
      enabled: true
      url: "http://localhost:50121"
      manager_script: "scripts/voicevox_manager.sh"
      auto_start: false
      speakers:
        春日部つむぎ: 8
        ずんだもん: 1
        玄野武宏: 11

  news:
    perplexity:
      enabled: true
      model: "sonar" #"sonar-pro"
      temperature: 0.2
      max_tokens: 2048
      search_recency_filter: "week"

logging:
  level: "INFO"
  format: "json"

automation:
  enabled: true
  venv_activate: ".venv/bin/activate"
  log_dir: "logs/automation"
  services:
    - name: "aim_ingest"
      command:
        - "python"
        - "scripts/import_to_aim.py"
      background: false
    - name: "aim_dashboard"
      command:
        - "aim"
        - "up"
        - "--host"
        - "127.0.0.1"
        - "--port"
        - "43800"
    - name: "voicevox"
      command:
        - "bash"
        - "scripts/voicevox_manager.sh"
        - "start"
    - name: "discord_news_bot"
      command:
        - "python"
        - "scripts/discord_news_bot.py"
  schedules:
    - name: "workflow_minutely"
      command:
        - "bash"
        - "scripts/run_workflow_cron.sh"
      cron: "*/1 * * * *"
